"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\nconst MAX_REDIRECTS = 5;\nconst rolePaths = {\n    Admin: [\n        \"/admin/dashBoard\",\n        \"/admin/addUser\",\n        \"/admin/editUser\"\n    ],\n    Instructor: [\n        \"/instructor/dashBoard\",\n        \"/instructor/profile\",\n        \"/instructor/addExam\"\n    ],\n    ExamOfficer: [\n        \"/exam-officer/dashBoard\",\n        \"/exam-officer/profile\",\n        \"/exam-officer/addSubject\",\n        \"/exam-officer/backupExam\"\n    ],\n    TechUnit: [\n        \"/tech/dashBoard\",\n        \"/tech/profile\",\n        \"/tech/reviewExam\",\n        \"/tech/printExam\",\n        \"/tech/viewExam\"\n    ]\n};\nasync function middleware(request) {\n    console.log(\"-------- Middleware Start --------\");\n    console.log(\"Request path:\", request.nextUrl.pathname);\n    const redirectCount = parseInt(request.headers.get(\"x-redirect-count\") || \"0\");\n    console.log(\"Current redirect count:\", redirectCount);\n    if (redirectCount >= MAX_REDIRECTS) {\n        console.log(\"Max redirects reached, going to error page\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/error\", request.url));\n    }\n    const userEmail = request.cookies.get(\"userEmail\")?.value;\n    const userRole = request.cookies.get(\"role\")?.value;\n    const userId = request.cookies.get(\"userId\")?.value;\n    console.log(\"User email:\", userEmail);\n    console.log(\"User role:\", userRole);\n    console.log(\"User ID:\", userId);\n    if (request.nextUrl.pathname === \"/sign-in\" || request.nextUrl.pathname === \"/error\") {\n        console.log(\"On sign-in or error page, no redirect\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    if (!userEmail) {\n        console.log(\"No user email, redirecting to sign-in\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/sign-in\", request.url));\n    }\n    const allowedPaths = rolePaths[userRole];\n    console.log(\"Allowed paths for role:\", allowedPaths);\n    if (allowedPaths) {\n        // Check if the current path starts with any of the allowed paths\n        const isAllowedPath = allowedPaths.some((path)=>request.nextUrl.pathname.startsWith(path));\n        console.log(\"Is allowed path:\", isAllowedPath);\n        if (!isAllowedPath) {\n            console.log(\"User tried to access a restricted path\");\n            // Special case for Admin trying to access editUser page\n            if (userRole === \"Admin\" && request.nextUrl.pathname.startsWith(\"/admin/editUser/\")) {\n                console.log(\"Admin accessing editUser page\");\n                const redirectUrl = new URL(`/admin/editUser/${userId}`, request.url);\n                console.log(\"Redirecting to:\", redirectUrl.toString());\n                const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n                newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n                return newResponse;\n            }\n            console.log(\"Redirecting to default role path\");\n            const defaultRedirectUrl = new URL(allowedPaths[0], request.url);\n            console.log(\"Default redirect URL:\", defaultRedirectUrl.toString());\n            const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(defaultRedirectUrl);\n            newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n            return newResponse;\n        }\n    } else {\n        console.log(\"User role not recognized, redirecting to default path\");\n        const redirectUrl = getRoleBasedRedirect(userRole, request.url);\n        if (redirectUrl) {\n            console.log(\"Redirecting to role-based URL:\", redirectUrl.toString());\n            const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n            newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n            return newResponse;\n        }\n    }\n    console.log(\"No redirect needed, proceeding to requested page\");\n    console.log(\"-------- Middleware End --------\");\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\nfunction getRoleBasedRedirect(role, baseUrl) {\n    console.log(\"Getting role-based redirect for role:\", role);\n    let redirectUrl = null;\n    switch(role){\n        case \"Admin\":\n            redirectUrl = new URL(\"/admin/dashBoard\", baseUrl);\n            break;\n        case \"Instructor\":\n            redirectUrl = new URL(\"/instructor/dashBoard\", baseUrl);\n            break;\n        case \"ExamOfficer\":\n            redirectUrl = new URL(\"/exam-officer/dashBoard\", baseUrl);\n            break;\n        case \"TechUnit\":\n            redirectUrl = new URL(\"/tech/dashBoard\", baseUrl);\n            break;\n        default:\n            redirectUrl = null;\n    }\n    console.log(\"Redirect URL:\", redirectUrl?.toString() || \"null\");\n    return redirectUrl;\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico|assets).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFFeEQsTUFBTUMsZ0JBQWdCO0FBRXRCLE1BQU1DLFlBQVk7SUFDaEJDLE9BQU87UUFBQztRQUFvQjtRQUFrQjtLQUFrQjtJQUNoRUMsWUFBWTtRQUNWO1FBQ0E7UUFDQTtLQUNEO0lBQ0RDLGFBQWE7UUFDWDtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBQ0RDLFVBQVU7UUFDUjtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7QUFDSDtBQUVPLGVBQWVDLFdBQVdDLE9BQW9CO0lBQ25EQyxRQUFRQyxHQUFHLENBQUM7SUFDWkQsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQkYsUUFBUUcsT0FBTyxDQUFDQyxRQUFRO0lBRXJELE1BQU1DLGdCQUFnQkMsU0FDcEJOLFFBQVFPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVCQUF1QjtJQUU3Q1AsUUFBUUMsR0FBRyxDQUFDLDJCQUEyQkc7SUFFdkMsSUFBSUEsaUJBQWlCWixlQUFlO1FBQ2xDUSxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPVixxREFBWUEsQ0FBQ2lCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLFVBQVVWLFFBQVFXLEdBQUc7SUFDNUQ7SUFFQSxNQUFNQyxZQUFZWixRQUFRYSxPQUFPLENBQUNMLEdBQUcsQ0FBQyxjQUFjTTtJQUNwRCxNQUFNQyxXQUFXZixRQUFRYSxPQUFPLENBQUNMLEdBQUcsQ0FBQyxTQUFTTTtJQUM5QyxNQUFNRSxTQUFTaEIsUUFBUWEsT0FBTyxDQUFDTCxHQUFHLENBQUMsV0FBV007SUFFOUNiLFFBQVFDLEdBQUcsQ0FBQyxlQUFlVTtJQUMzQlgsUUFBUUMsR0FBRyxDQUFDLGNBQWNhO0lBQzFCZCxRQUFRQyxHQUFHLENBQUMsWUFBWWM7SUFFeEIsSUFDRWhCLFFBQVFHLE9BQU8sQ0FBQ0MsUUFBUSxLQUFLLGNBQzdCSixRQUFRRyxPQUFPLENBQUNDLFFBQVEsS0FBSyxVQUM3QjtRQUNBSCxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPVixxREFBWUEsQ0FBQ3lCLElBQUk7SUFDMUI7SUFFQSxJQUFJLENBQUNMLFdBQVc7UUFDZFgsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBT1YscURBQVlBLENBQUNpQixRQUFRLENBQUMsSUFBSUMsSUFBSSxZQUFZVixRQUFRVyxHQUFHO0lBQzlEO0lBRUEsTUFBTU8sZUFBZXhCLFNBQVMsQ0FBQ3FCLFNBQW1DO0lBQ2xFZCxRQUFRQyxHQUFHLENBQUMsMkJBQTJCZ0I7SUFFdkMsSUFBSUEsY0FBYztRQUNoQixpRUFBaUU7UUFDakUsTUFBTUMsZ0JBQWdCRCxhQUFhRSxJQUFJLENBQUMsQ0FBQ0MsT0FDdkNyQixRQUFRRyxPQUFPLENBQUNDLFFBQVEsQ0FBQ2tCLFVBQVUsQ0FBQ0Q7UUFFdENwQixRQUFRQyxHQUFHLENBQUMsb0JBQW9CaUI7UUFFaEMsSUFBSSxDQUFDQSxlQUFlO1lBQ2xCbEIsUUFBUUMsR0FBRyxDQUFDO1lBRVosd0RBQXdEO1lBQ3hELElBQ0VhLGFBQWEsV0FDYmYsUUFBUUcsT0FBTyxDQUFDQyxRQUFRLENBQUNrQixVQUFVLENBQUMscUJBQ3BDO2dCQUNBckIsUUFBUUMsR0FBRyxDQUFDO2dCQUNaLE1BQU1xQixjQUFjLElBQUliLElBQUksQ0FBQyxnQkFBZ0IsRUFBRU0sT0FBTyxDQUFDLEVBQUVoQixRQUFRVyxHQUFHO2dCQUNwRVYsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQnFCLFlBQVlDLFFBQVE7Z0JBQ25ELE1BQU1DLGNBQWNqQyxxREFBWUEsQ0FBQ2lCLFFBQVEsQ0FBQ2M7Z0JBQzFDRSxZQUFZbEIsT0FBTyxDQUFDbUIsR0FBRyxDQUNyQixvQkFDQSxDQUFDckIsZ0JBQWdCLEdBQUdtQixRQUFRO2dCQUU5QixPQUFPQztZQUNUO1lBRUF4QixRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNeUIscUJBQXFCLElBQUlqQixJQUFJUSxZQUFZLENBQUMsRUFBRSxFQUFFbEIsUUFBUVcsR0FBRztZQUMvRFYsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QnlCLG1CQUFtQkgsUUFBUTtZQUNoRSxNQUFNQyxjQUFjakMscURBQVlBLENBQUNpQixRQUFRLENBQUNrQjtZQUMxQ0YsWUFBWWxCLE9BQU8sQ0FBQ21CLEdBQUcsQ0FDckIsb0JBQ0EsQ0FBQ3JCLGdCQUFnQixHQUFHbUIsUUFBUTtZQUU5QixPQUFPQztRQUNUO0lBQ0YsT0FBTztRQUNMeEIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTXFCLGNBQWNLLHFCQUFxQmIsVUFBVWYsUUFBUVcsR0FBRztRQUM5RCxJQUFJWSxhQUFhO1lBQ2Z0QixRQUFRQyxHQUFHLENBQUMsa0NBQWtDcUIsWUFBWUMsUUFBUTtZQUNsRSxNQUFNQyxjQUFjakMscURBQVlBLENBQUNpQixRQUFRLENBQUNjO1lBQzFDRSxZQUFZbEIsT0FBTyxDQUFDbUIsR0FBRyxDQUNyQixvQkFDQSxDQUFDckIsZ0JBQWdCLEdBQUdtQixRQUFRO1lBRTlCLE9BQU9DO1FBQ1Q7SUFDRjtJQUVBeEIsUUFBUUMsR0FBRyxDQUFDO0lBQ1pELFFBQVFDLEdBQUcsQ0FBQztJQUNaLE9BQU9WLHFEQUFZQSxDQUFDeUIsSUFBSTtBQUMxQjtBQUVBLFNBQVNXLHFCQUNQQyxJQUF3QixFQUN4QkMsT0FBZTtJQUVmN0IsUUFBUUMsR0FBRyxDQUFDLHlDQUF5QzJCO0lBQ3JELElBQUlOLGNBQTBCO0lBQzlCLE9BQVFNO1FBQ04sS0FBSztZQUNITixjQUFjLElBQUliLElBQUksb0JBQW9Cb0I7WUFDMUM7UUFDRixLQUFLO1lBQ0hQLGNBQWMsSUFBSWIsSUFBSSx5QkFBeUJvQjtZQUMvQztRQUNGLEtBQUs7WUFDSFAsY0FBYyxJQUFJYixJQUFJLDJCQUEyQm9CO1lBQ2pEO1FBQ0YsS0FBSztZQUNIUCxjQUFjLElBQUliLElBQUksbUJBQW1Cb0I7WUFDekM7UUFDRjtZQUNFUCxjQUFjO0lBQ2xCO0lBQ0F0QixRQUFRQyxHQUFHLENBQUMsaUJBQWlCcUIsYUFBYUMsY0FBYztJQUN4RCxPQUFPRDtBQUNUO0FBRU8sTUFBTVEsU0FBUztJQUNwQkMsU0FBUztRQUFDO0tBQTJEO0FBQ3ZFLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbWlkZGxld2FyZS50cz80MjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcblxyXG5jb25zdCBNQVhfUkVESVJFQ1RTID0gNTtcclxuXHJcbmNvbnN0IHJvbGVQYXRocyA9IHtcclxuICBBZG1pbjogWycvYWRtaW4vZGFzaEJvYXJkJywgJy9hZG1pbi9hZGRVc2VyJywgJy9hZG1pbi9lZGl0VXNlciddLFxyXG4gIEluc3RydWN0b3I6IFtcclxuICAgICcvaW5zdHJ1Y3Rvci9kYXNoQm9hcmQnLFxyXG4gICAgJy9pbnN0cnVjdG9yL3Byb2ZpbGUnLFxyXG4gICAgJy9pbnN0cnVjdG9yL2FkZEV4YW0nLFxyXG4gIF0sXHJcbiAgRXhhbU9mZmljZXI6IFtcclxuICAgICcvZXhhbS1vZmZpY2VyL2Rhc2hCb2FyZCcsXHJcbiAgICAnL2V4YW0tb2ZmaWNlci9wcm9maWxlJyxcclxuICAgICcvZXhhbS1vZmZpY2VyL2FkZFN1YmplY3QnLFxyXG4gICAgJy9leGFtLW9mZmljZXIvYmFja3VwRXhhbScsXHJcbiAgXSxcclxuICBUZWNoVW5pdDogW1xyXG4gICAgJy90ZWNoL2Rhc2hCb2FyZCcsXHJcbiAgICAnL3RlY2gvcHJvZmlsZScsXHJcbiAgICAnL3RlY2gvcmV2aWV3RXhhbScsXHJcbiAgICAnL3RlY2gvcHJpbnRFeGFtJyxcclxuICAgICcvdGVjaC92aWV3RXhhbScsXHJcbiAgXSxcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tIE1pZGRsZXdhcmUgU3RhcnQgLS0tLS0tLS0nKTtcclxuICBjb25zb2xlLmxvZygnUmVxdWVzdCBwYXRoOicsIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSk7XHJcblxyXG4gIGNvbnN0IHJlZGlyZWN0Q291bnQgPSBwYXJzZUludChcclxuICAgIHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVkaXJlY3QtY291bnQnKSB8fCAnMCdcclxuICApO1xyXG4gIGNvbnNvbGUubG9nKCdDdXJyZW50IHJlZGlyZWN0IGNvdW50OicsIHJlZGlyZWN0Q291bnQpO1xyXG5cclxuICBpZiAocmVkaXJlY3RDb3VudCA+PSBNQVhfUkVESVJFQ1RTKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTWF4IHJlZGlyZWN0cyByZWFjaGVkLCBnb2luZyB0byBlcnJvciBwYWdlJyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9lcnJvcicsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB1c2VyRW1haWwgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCd1c2VyRW1haWwnKT8udmFsdWU7XHJcbiAgY29uc3QgdXNlclJvbGUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdyb2xlJyk/LnZhbHVlO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHJlcXVlc3QuY29va2llcy5nZXQoJ3VzZXJJZCcpPy52YWx1ZTtcclxuXHJcbiAgY29uc29sZS5sb2coJ1VzZXIgZW1haWw6JywgdXNlckVtYWlsKTtcclxuICBjb25zb2xlLmxvZygnVXNlciByb2xlOicsIHVzZXJSb2xlKTtcclxuICBjb25zb2xlLmxvZygnVXNlciBJRDonLCB1c2VySWQpO1xyXG5cclxuICBpZiAoXHJcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvc2lnbi1pbicgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9lcnJvcidcclxuICApIHtcclxuICAgIGNvbnNvbGUubG9nKCdPbiBzaWduLWluIG9yIGVycm9yIHBhZ2UsIG5vIHJlZGlyZWN0Jyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxuICB9XHJcblxyXG4gIGlmICghdXNlckVtYWlsKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTm8gdXNlciBlbWFpbCwgcmVkaXJlY3RpbmcgdG8gc2lnbi1pbicpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvc2lnbi1pbicsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhbGxvd2VkUGF0aHMgPSByb2xlUGF0aHNbdXNlclJvbGUgYXMga2V5b2YgdHlwZW9mIHJvbGVQYXRoc107XHJcbiAgY29uc29sZS5sb2coJ0FsbG93ZWQgcGF0aHMgZm9yIHJvbGU6JywgYWxsb3dlZFBhdGhzKTtcclxuXHJcbiAgaWYgKGFsbG93ZWRQYXRocykge1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgcGF0aCBzdGFydHMgd2l0aCBhbnkgb2YgdGhlIGFsbG93ZWQgcGF0aHNcclxuICAgIGNvbnN0IGlzQWxsb3dlZFBhdGggPSBhbGxvd2VkUGF0aHMuc29tZSgocGF0aCkgPT5cclxuICAgICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aClcclxuICAgICk7XHJcbiAgICBjb25zb2xlLmxvZygnSXMgYWxsb3dlZCBwYXRoOicsIGlzQWxsb3dlZFBhdGgpO1xyXG5cclxuICAgIGlmICghaXNBbGxvd2VkUGF0aCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlciB0cmllZCB0byBhY2Nlc3MgYSByZXN0cmljdGVkIHBhdGgnKTtcclxuXHJcbiAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgQWRtaW4gdHJ5aW5nIHRvIGFjY2VzcyBlZGl0VXNlciBwYWdlXHJcbiAgICAgIGlmIChcclxuICAgICAgICB1c2VyUm9sZSA9PT0gJ0FkbWluJyAmJlxyXG4gICAgICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYWRtaW4vZWRpdFVzZXIvJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FkbWluIGFjY2Vzc2luZyBlZGl0VXNlciBwYWdlJyk7XHJcbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKGAvYWRtaW4vZWRpdFVzZXIvJHt1c2VySWR9YCwgcmVxdWVzdC51cmwpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWRpcmVjdGluZyB0bzonLCByZWRpcmVjdFVybC50b1N0cmluZygpKTtcclxuICAgICAgICBjb25zdCBuZXdSZXNwb25zZSA9IE5leHRSZXNwb25zZS5yZWRpcmVjdChyZWRpcmVjdFVybCk7XHJcbiAgICAgICAgbmV3UmVzcG9uc2UuaGVhZGVycy5zZXQoXHJcbiAgICAgICAgICAneC1yZWRpcmVjdC1jb3VudCcsXHJcbiAgICAgICAgICAocmVkaXJlY3RDb3VudCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBuZXdSZXNwb25zZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHRvIGRlZmF1bHQgcm9sZSBwYXRoJyk7XHJcbiAgICAgIGNvbnN0IGRlZmF1bHRSZWRpcmVjdFVybCA9IG5ldyBVUkwoYWxsb3dlZFBhdGhzWzBdLCByZXF1ZXN0LnVybCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZWZhdWx0IHJlZGlyZWN0IFVSTDonLCBkZWZhdWx0UmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGRlZmF1bHRSZWRpcmVjdFVybCk7XHJcbiAgICAgIG5ld1Jlc3BvbnNlLmhlYWRlcnMuc2V0KFxyXG4gICAgICAgICd4LXJlZGlyZWN0LWNvdW50JyxcclxuICAgICAgICAocmVkaXJlY3RDb3VudCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIG5ld1Jlc3BvbnNlO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnVXNlciByb2xlIG5vdCByZWNvZ25pemVkLCByZWRpcmVjdGluZyB0byBkZWZhdWx0IHBhdGgnKTtcclxuICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gZ2V0Um9sZUJhc2VkUmVkaXJlY3QodXNlclJvbGUsIHJlcXVlc3QudXJsKTtcclxuICAgIGlmIChyZWRpcmVjdFVybCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVkaXJlY3RpbmcgdG8gcm9sZS1iYXNlZCBVUkw6JywgcmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKTtcclxuICAgICAgbmV3UmVzcG9uc2UuaGVhZGVycy5zZXQoXHJcbiAgICAgICAgJ3gtcmVkaXJlY3QtY291bnQnLFxyXG4gICAgICAgIChyZWRpcmVjdENvdW50ICsgMSkudG9TdHJpbmcoKVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gbmV3UmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygnTm8gcmVkaXJlY3QgbmVlZGVkLCBwcm9jZWVkaW5nIHRvIHJlcXVlc3RlZCBwYWdlJyk7XHJcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tIE1pZGRsZXdhcmUgRW5kIC0tLS0tLS0tJyk7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJvbGVCYXNlZFJlZGlyZWN0KFxyXG4gIHJvbGU6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuICBiYXNlVXJsOiBzdHJpbmdcclxuKTogVVJMIHwgbnVsbCB7XHJcbiAgY29uc29sZS5sb2coJ0dldHRpbmcgcm9sZS1iYXNlZCByZWRpcmVjdCBmb3Igcm9sZTonLCByb2xlKTtcclxuICBsZXQgcmVkaXJlY3RVcmw6IFVSTCB8IG51bGwgPSBudWxsO1xyXG4gIHN3aXRjaCAocm9sZSkge1xyXG4gICAgY2FzZSAnQWRtaW4nOlxyXG4gICAgICByZWRpcmVjdFVybCA9IG5ldyBVUkwoJy9hZG1pbi9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdJbnN0cnVjdG9yJzpcclxuICAgICAgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKCcvaW5zdHJ1Y3Rvci9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdFeGFtT2ZmaWNlcic6XHJcbiAgICAgIHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL2V4YW0tb2ZmaWNlci9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdUZWNoVW5pdCc6XHJcbiAgICAgIHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL3RlY2gvZGFzaEJvYXJkJywgYmFzZVVybCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmVkaXJlY3RVcmwgPSBudWxsO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnUmVkaXJlY3QgVVJMOicsIHJlZGlyZWN0VXJsPy50b1N0cmluZygpIHx8ICdudWxsJyk7XHJcbiAgcmV0dXJuIHJlZGlyZWN0VXJsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIG1hdGNoZXI6IFsnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfGFzc2V0cykuKiknXSxcclxufTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk1BWF9SRURJUkVDVFMiLCJyb2xlUGF0aHMiLCJBZG1pbiIsIkluc3RydWN0b3IiLCJFeGFtT2ZmaWNlciIsIlRlY2hVbml0IiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwibmV4dFVybCIsInBhdGhuYW1lIiwicmVkaXJlY3RDb3VudCIsInBhcnNlSW50IiwiaGVhZGVycyIsImdldCIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwidXNlckVtYWlsIiwiY29va2llcyIsInZhbHVlIiwidXNlclJvbGUiLCJ1c2VySWQiLCJuZXh0IiwiYWxsb3dlZFBhdGhzIiwiaXNBbGxvd2VkUGF0aCIsInNvbWUiLCJwYXRoIiwic3RhcnRzV2l0aCIsInJlZGlyZWN0VXJsIiwidG9TdHJpbmciLCJuZXdSZXNwb25zZSIsInNldCIsImRlZmF1bHRSZWRpcmVjdFVybCIsImdldFJvbGVCYXNlZFJlZGlyZWN0Iiwicm9sZSIsImJhc2VVcmwiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});