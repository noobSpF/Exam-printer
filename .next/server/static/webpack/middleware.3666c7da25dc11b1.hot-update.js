"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\nconst MAX_REDIRECTS = 5;\nconst rolePaths = {\n    Admin: [\n        \"/admin/dashBoard\",\n        \"/admin/addUser\",\n        \"/admin/editUser\"\n    ],\n    Instructor: [\n        \"/instructor/dashBoard\",\n        \"/instructor/profile\",\n        \"/instructor/addExam\"\n    ],\n    ExamOfficer: [\n        \"/exam-officer/dashBoard\",\n        \"/exam-officer/profile\",\n        \"/exam-officer/addSubject\",\n        \"/exam-officer/backupExam\"\n    ],\n    TechUnit: [\n        \"/tech/dashBoard\",\n        \"/tech/profile\",\n        \"/tech/reviewExam\",\n        \"/tech/printExam\"\n    ]\n};\nasync function middleware(request) {\n    console.log(\"-------- Middleware Start --------\");\n    console.log(\"Request path:\", request.nextUrl.pathname);\n    const redirectCount = parseInt(request.headers.get(\"x-redirect-count\") || \"0\");\n    console.log(\"Current redirect count:\", redirectCount);\n    if (redirectCount >= MAX_REDIRECTS) {\n        console.log(\"Max redirects reached, going to error page\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/error\", request.url));\n    }\n    const userEmail = request.cookies.get(\"userEmail\")?.value;\n    const userRole = request.cookies.get(\"role\")?.value;\n    const userId = request.cookies.get(\"userId\")?.value;\n    console.log(\"User email:\", userEmail);\n    console.log(\"User role:\", userRole);\n    console.log(\"User ID:\", userId);\n    if (request.nextUrl.pathname === \"/sign-in\" || request.nextUrl.pathname === \"/error\") {\n        console.log(\"On sign-in or error page, no redirect\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    if (!userEmail) {\n        console.log(\"No user email, redirecting to sign-in\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/sign-in\", request.url));\n    }\n    const allowedPaths = rolePaths[userRole];\n    console.log(\"Allowed paths for role:\", allowedPaths);\n    if (allowedPaths) {\n        // Check if the current path starts with any of the allowed paths\n        const isAllowedPath = allowedPaths.some((path)=>request.nextUrl.pathname.startsWith(path));\n        console.log(\"Is allowed path:\", isAllowedPath);\n        if (!isAllowedPath) {\n            console.log(\"User tried to access a restricted path\");\n            // Special case for Admin trying to access editUser page\n            if (userRole === \"Admin\" && request.nextUrl.pathname.startsWith(\"/admin/editUser/\")) {\n                console.log(\"Admin accessing editUser page\");\n                const redirectUrl = new URL(`/admin/editUser/${userId}`, request.url);\n                console.log(\"Redirecting to:\", redirectUrl.toString());\n                const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n                newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n                return newResponse;\n            }\n            console.log(\"Redirecting to default role path\");\n            const defaultRedirectUrl = new URL(allowedPaths[0], request.url);\n            console.log(\"Default redirect URL:\", defaultRedirectUrl.toString());\n            const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(defaultRedirectUrl);\n            newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n            return newResponse;\n        }\n    } else {\n        console.log(\"User role not recognized, redirecting to default path\");\n        const redirectUrl = getRoleBasedRedirect(userRole, request.url);\n        if (redirectUrl) {\n            console.log(\"Redirecting to role-based URL:\", redirectUrl.toString());\n            const newResponse = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n            newResponse.headers.set(\"x-redirect-count\", (redirectCount + 1).toString());\n            return newResponse;\n        }\n    }\n    console.log(\"No redirect needed, proceeding to requested page\");\n    console.log(\"-------- Middleware End --------\");\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\nfunction getRoleBasedRedirect(role, baseUrl) {\n    console.log(\"Getting role-based redirect for role:\", role);\n    let redirectUrl = null;\n    switch(role){\n        case \"Admin\":\n            redirectUrl = new URL(\"/admin/dashBoard\", baseUrl);\n            break;\n        case \"Instructor\":\n            redirectUrl = new URL(\"/instructor/dashBoard\", baseUrl);\n            break;\n        case \"ExamOfficer\":\n            redirectUrl = new URL(\"/exam-officer/dashBoard\", baseUrl);\n            break;\n        case \"TechUnit\":\n            redirectUrl = new URL(\"/tech/dashBoard\", baseUrl);\n            break;\n        default:\n            redirectUrl = null;\n    }\n    console.log(\"Redirect URL:\", redirectUrl?.toString() || \"null\");\n    return redirectUrl;\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico|assets).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN2RSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL21pZGRsZXdhcmUudHM/NDIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5cclxuY29uc3QgTUFYX1JFRElSRUNUUyA9IDU7XHJcblxyXG5jb25zdCByb2xlUGF0aHMgPSB7XHJcbiAgQWRtaW46IFsnL2FkbWluL2Rhc2hCb2FyZCcsICcvYWRtaW4vYWRkVXNlcicsICcvYWRtaW4vZWRpdFVzZXInXSxcclxuICBJbnN0cnVjdG9yOiBbXHJcbiAgICAnL2luc3RydWN0b3IvZGFzaEJvYXJkJyxcclxuICAgICcvaW5zdHJ1Y3Rvci9wcm9maWxlJyxcclxuICAgICcvaW5zdHJ1Y3Rvci9hZGRFeGFtJyxcclxuICBdLFxyXG4gIEV4YW1PZmZpY2VyOiBbXHJcbiAgICAnL2V4YW0tb2ZmaWNlci9kYXNoQm9hcmQnLFxyXG4gICAgJy9leGFtLW9mZmljZXIvcHJvZmlsZScsXHJcbiAgICAnL2V4YW0tb2ZmaWNlci9hZGRTdWJqZWN0JyxcclxuICAgICcvZXhhbS1vZmZpY2VyL2JhY2t1cEV4YW0nLFxyXG4gIF0sXHJcbiAgVGVjaFVuaXQ6IFtcclxuICAgICcvdGVjaC9kYXNoQm9hcmQnLFxyXG4gICAgJy90ZWNoL3Byb2ZpbGUnLFxyXG4gICAgJy90ZWNoL3Jldmlld0V4YW0nLFxyXG4gICAgJy90ZWNoL3ByaW50RXhhbScsXHJcbiAgXSxcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tIE1pZGRsZXdhcmUgU3RhcnQgLS0tLS0tLS0nKTtcclxuICBjb25zb2xlLmxvZygnUmVxdWVzdCBwYXRoOicsIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSk7XHJcblxyXG4gIGNvbnN0IHJlZGlyZWN0Q291bnQgPSBwYXJzZUludChcclxuICAgIHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVkaXJlY3QtY291bnQnKSB8fCAnMCdcclxuICApO1xyXG4gIGNvbnNvbGUubG9nKCdDdXJyZW50IHJlZGlyZWN0IGNvdW50OicsIHJlZGlyZWN0Q291bnQpO1xyXG5cclxuICBpZiAocmVkaXJlY3RDb3VudCA+PSBNQVhfUkVESVJFQ1RTKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTWF4IHJlZGlyZWN0cyByZWFjaGVkLCBnb2luZyB0byBlcnJvciBwYWdlJyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9lcnJvcicsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB1c2VyRW1haWwgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCd1c2VyRW1haWwnKT8udmFsdWU7XHJcbiAgY29uc3QgdXNlclJvbGUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdyb2xlJyk/LnZhbHVlO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHJlcXVlc3QuY29va2llcy5nZXQoJ3VzZXJJZCcpPy52YWx1ZTtcclxuXHJcbiAgY29uc29sZS5sb2coJ1VzZXIgZW1haWw6JywgdXNlckVtYWlsKTtcclxuICBjb25zb2xlLmxvZygnVXNlciByb2xlOicsIHVzZXJSb2xlKTtcclxuICBjb25zb2xlLmxvZygnVXNlciBJRDonLCB1c2VySWQpO1xyXG5cclxuICBpZiAoXHJcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvc2lnbi1pbicgfHxcclxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9lcnJvcidcclxuICApIHtcclxuICAgIGNvbnNvbGUubG9nKCdPbiBzaWduLWluIG9yIGVycm9yIHBhZ2UsIG5vIHJlZGlyZWN0Jyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxuICB9XHJcblxyXG4gIGlmICghdXNlckVtYWlsKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTm8gdXNlciBlbWFpbCwgcmVkaXJlY3RpbmcgdG8gc2lnbi1pbicpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvc2lnbi1pbicsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhbGxvd2VkUGF0aHMgPSByb2xlUGF0aHNbdXNlclJvbGUgYXMga2V5b2YgdHlwZW9mIHJvbGVQYXRoc107XHJcbiAgY29uc29sZS5sb2coJ0FsbG93ZWQgcGF0aHMgZm9yIHJvbGU6JywgYWxsb3dlZFBhdGhzKTtcclxuXHJcbiAgaWYgKGFsbG93ZWRQYXRocykge1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgcGF0aCBzdGFydHMgd2l0aCBhbnkgb2YgdGhlIGFsbG93ZWQgcGF0aHNcclxuICAgIGNvbnN0IGlzQWxsb3dlZFBhdGggPSBhbGxvd2VkUGF0aHMuc29tZSgocGF0aCkgPT5cclxuICAgICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aClcclxuICAgICk7XHJcbiAgICBjb25zb2xlLmxvZygnSXMgYWxsb3dlZCBwYXRoOicsIGlzQWxsb3dlZFBhdGgpO1xyXG5cclxuICAgIGlmICghaXNBbGxvd2VkUGF0aCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlciB0cmllZCB0byBhY2Nlc3MgYSByZXN0cmljdGVkIHBhdGgnKTtcclxuXHJcbiAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgQWRtaW4gdHJ5aW5nIHRvIGFjY2VzcyBlZGl0VXNlciBwYWdlXHJcbiAgICAgIGlmIChcclxuICAgICAgICB1c2VyUm9sZSA9PT0gJ0FkbWluJyAmJlxyXG4gICAgICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYWRtaW4vZWRpdFVzZXIvJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FkbWluIGFjY2Vzc2luZyBlZGl0VXNlciBwYWdlJyk7XHJcbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKGAvYWRtaW4vZWRpdFVzZXIvJHt1c2VySWR9YCwgcmVxdWVzdC51cmwpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWRpcmVjdGluZyB0bzonLCByZWRpcmVjdFVybC50b1N0cmluZygpKTtcclxuICAgICAgICBjb25zdCBuZXdSZXNwb25zZSA9IE5leHRSZXNwb25zZS5yZWRpcmVjdChyZWRpcmVjdFVybCk7XHJcbiAgICAgICAgbmV3UmVzcG9uc2UuaGVhZGVycy5zZXQoXHJcbiAgICAgICAgICAneC1yZWRpcmVjdC1jb3VudCcsXHJcbiAgICAgICAgICAocmVkaXJlY3RDb3VudCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBuZXdSZXNwb25zZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0aW5nIHRvIGRlZmF1bHQgcm9sZSBwYXRoJyk7XHJcbiAgICAgIGNvbnN0IGRlZmF1bHRSZWRpcmVjdFVybCA9IG5ldyBVUkwoYWxsb3dlZFBhdGhzWzBdLCByZXF1ZXN0LnVybCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZWZhdWx0IHJlZGlyZWN0IFVSTDonLCBkZWZhdWx0UmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGRlZmF1bHRSZWRpcmVjdFVybCk7XHJcbiAgICAgIG5ld1Jlc3BvbnNlLmhlYWRlcnMuc2V0KFxyXG4gICAgICAgICd4LXJlZGlyZWN0LWNvdW50JyxcclxuICAgICAgICAocmVkaXJlY3RDb3VudCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIG5ld1Jlc3BvbnNlO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnVXNlciByb2xlIG5vdCByZWNvZ25pemVkLCByZWRpcmVjdGluZyB0byBkZWZhdWx0IHBhdGgnKTtcclxuICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gZ2V0Um9sZUJhc2VkUmVkaXJlY3QodXNlclJvbGUsIHJlcXVlc3QudXJsKTtcclxuICAgIGlmIChyZWRpcmVjdFVybCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVkaXJlY3RpbmcgdG8gcm9sZS1iYXNlZCBVUkw6JywgcmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKTtcclxuICAgICAgbmV3UmVzcG9uc2UuaGVhZGVycy5zZXQoXHJcbiAgICAgICAgJ3gtcmVkaXJlY3QtY291bnQnLFxyXG4gICAgICAgIChyZWRpcmVjdENvdW50ICsgMSkudG9TdHJpbmcoKVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gbmV3UmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygnTm8gcmVkaXJlY3QgbmVlZGVkLCBwcm9jZWVkaW5nIHRvIHJlcXVlc3RlZCBwYWdlJyk7XHJcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tIE1pZGRsZXdhcmUgRW5kIC0tLS0tLS0tJyk7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJvbGVCYXNlZFJlZGlyZWN0KFxyXG4gIHJvbGU6IHN0cmluZyB8IHVuZGVmaW5lZCxcclxuICBiYXNlVXJsOiBzdHJpbmdcclxuKTogVVJMIHwgbnVsbCB7XHJcbiAgY29uc29sZS5sb2coJ0dldHRpbmcgcm9sZS1iYXNlZCByZWRpcmVjdCBmb3Igcm9sZTonLCByb2xlKTtcclxuICBsZXQgcmVkaXJlY3RVcmw6IFVSTCB8IG51bGwgPSBudWxsO1xyXG4gIHN3aXRjaCAocm9sZSkge1xyXG4gICAgY2FzZSAnQWRtaW4nOlxyXG4gICAgICByZWRpcmVjdFVybCA9IG5ldyBVUkwoJy9hZG1pbi9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdJbnN0cnVjdG9yJzpcclxuICAgICAgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKCcvaW5zdHJ1Y3Rvci9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdFeGFtT2ZmaWNlcic6XHJcbiAgICAgIHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL2V4YW0tb2ZmaWNlci9kYXNoQm9hcmQnLCBiYXNlVXJsKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdUZWNoVW5pdCc6XHJcbiAgICAgIHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL3RlY2gvZGFzaEJvYXJkJywgYmFzZVVybCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmVkaXJlY3RVcmwgPSBudWxsO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZygnUmVkaXJlY3QgVVJMOicsIHJlZGlyZWN0VXJsPy50b1N0cmluZygpIHx8ICdudWxsJyk7XHJcbiAgcmV0dXJuIHJlZGlyZWN0VXJsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIG1hdGNoZXI6IFsnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfGFzc2V0cykuKiknXSxcclxufTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk1BWF9SRURJUkVDVFMiLCJyb2xlUGF0aHMiLCJBZG1pbiIsIkluc3RydWN0b3IiLCJFeGFtT2ZmaWNlciIsIlRlY2hVbml0IiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwibmV4dFVybCIsInBhdGhuYW1lIiwicmVkaXJlY3RDb3VudCIsInBhcnNlSW50IiwiaGVhZGVycyIsImdldCIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwidXNlckVtYWlsIiwiY29va2llcyIsInZhbHVlIiwidXNlclJvbGUiLCJ1c2VySWQiLCJuZXh0IiwiYWxsb3dlZFBhdGhzIiwiaXNBbGxvd2VkUGF0aCIsInNvbWUiLCJwYXRoIiwic3RhcnRzV2l0aCIsInJlZGlyZWN0VXJsIiwidG9TdHJpbmciLCJuZXdSZXNwb25zZSIsInNldCIsImRlZmF1bHRSZWRpcmVjdFVybCIsImdldFJvbGVCYXNlZFJlZGlyZWN0Iiwicm9sZSIsImJhc2VVcmwiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});